<!DOCTYPE html>
<html lang="en">
  <head>
    <title>PHP2: TP2</title>
    <meta charset="utf-8">
    <meta name="description" content="Trucsweb.com" />    
    <meta name="viewport" content="width=device-width, initial-scale=1">
	<meta http-equiv="X-UA-Compatible" content="ie=edge">  
	
    <link rel="stylesheet" href="../../../style/zoning.css" media="screen" />	
    <link rel="stylesheet" href="../../../style/contenuAccueil.css" media="screen" />
    <link rel="stylesheet" href="../../../style/calculatrice.css" media="screen" />
    <link rel="stylesheet" href="../../../style/examen.css" media="screen" />
    <link rel="stylesheet" href="../../../style/menu907.css" media="screen" />
    <link rel="stylesheet" href="../../../style/dropdown.css" media="screen" />	
    <link rel="stylesheet" href="../../../style/sticky.css" media="screen" /> 	
	<link rel="stylesheet" href="../../../style/top.css"  media="screen"><!--  Bouton remonter en haut de page -->		
    <link rel="stylesheet" href="../../../style/menu_accordeon.css" media="all"><!-- barre laterale gauche bas -->
	<link rel="stylesheet" href="../../../style/prism.css" media="screen" /> 
    
	<style>
	    #menu .dropdown2-container{min-width:11.76em !important; }
		#menu{ padding-left:20%; }
		#menu a, #menu .dropdown2-btn{ font-weight:normal; }
		.structureSujet, .questions_, .reponse_ {line-height:1.5;}
		.structureSujet{ font-size:0.9em;}
		.questions_{ padding-left:4em ; }
		.reponse_ { padding-left:3em ; }
		
		.greenNum, .blueNum, .redNum { 
		    color:black; 
            border-radius:50px;		
		}
		/********** ça fait un peu tâche. je vire tout pour faire propre( du noir sur fond blanc ) **************
		.greenNum { 
			box-shadow:
              0px 2px 4px 0px #4CAF50 inset,
              0px 2px 4px 0px inset;		
		}
		.blueNum { 
			box-shadow:
              0px 2px 4px 0px #2196F3 inset,
              0px 2px 4px 0px inset;		
		}
		.redNum { 
			box-shadow:
              0px 2px 4px 0px #a1008c inset,
              0px 2px 4px 0px inset;		
		}
		*********************************************************************************************/
		.greenNum, .blueNum, .redNum { 
			box-shadow:
			0px 16px 4px 0px white inset,
            0px 2px 4px 0px inset;		
		}
		
		.img{ 

		  width:87%;
		  height: 90% ;
		  padding:1.2em; 
		  margin:0 0 0 -1em;
		  box-shadow:
			0px 2px 2px 0px rgba(0, 0, 0, 0.5) inset,
			0px 2px 2px 0px rgba(255, 255, 255, 0.5);
		  border:1px solid #8c8b8b;
		  border-radius: 4px; 
          background:white;		  
		}
		.paragraphe{
			border:1px solid #8c8b8b; 
			padding: 0.5em 1em;
			line-height:1.5;
			margin:1em 0; 
			border-radius: 2px;
			display:inline-block;
			background:white;
			width:93.9%;
		}
		.petitParagraphe{
		   width:84% !important; 
		   padding-left:2em !important;
		}
		.moyenParagraphe{
		    width:89.8%;
			padding-left:0 !important;
		}
		
		.idS{
			border:1px solid #8c8b8b ; 
			padding:1px 4px; 
			border-radius:0 0 3px 3px;
									
			/* box-shadow:0.2px 2px 8px 0px #8c8b8b; */
			
			box-shadow:0.2px 2px 16px 0px #8c8b8b; 

			width:96.5%;
			background:white;
			margin-bottom:1em;
			
			/************************************************
			  Pour mettre un width sur un elt texte(inline):
			  display:inline-block; width:xxx;
			*************************************************/
		}
		.subQuestion{
		   line-height:1.5; 
		   background:white;
		   display:inline-block; width:98.2%;
		}
		.t-transparent{
		    line-height:1.5; 
			border:none;
			margin-top:2em !important;
			margin-bottom:0 !important;
			background:transparent !important;

        }
        .attention{
		  background:#ff1;
		  border-radius:2px;
		  padding:2px;
		}
        .indication{
		   margin-top:0;
		   padding-top:0;
		   margin-bottom:0;
		   padding-bottom:0;
		   background:transparent !important;
		   border:none;
		}
        .notaBene{
		  background:white;
		  margin:0;
		  width:86%;
		  padding-right:2em; 
		}
		
		
		
		.widget-asideD{
		  font:italic 0.8em calibri ligh ;
		  height:auto;
		  padding:0.5em 0.2em 0.5em 0.5em;
		}
		.widget-asideD ul {
		    margin:0.3em ;
			color:#8c8b8b;
		}
		.widget-asideD ul ~ .widget-asideD ul { 
		  color:black !important;
		}
		.widget-asideD ul li {
		    margin-left:-1.5em; margin-right:1em; 
		}
		
		
		
		.exemple{
			width:60%; 
			margin-bottom:0.4em;
		}
		pre{
			white-space:pre-line; 
			padding-left:2em !important;
			color:#999;
			
		}
		summary{
		  	outline:none !important;
			border:none !important;
		}
		summary:hover {		    					   
		   cursor: pointer;
		}
		.enonceTpUN{ 
		    width:100.05%; 
			margin-left:-8%;  
			height:30em;
			float:left;
			
			overflow-x:visible !important;
			magin-bottom:0;
			zoom: reset; /* seul webkit sait faire ça */
		}

		

	
		#zoomerLeSujet details div:hover{
		   width:128% ;
		   margin-left:-8%; 
		   cursor: zoom-in;
		   color:#990033;
		   overflow-x:none;
		}
		.purple{
		   font:normal 1em calibri light;
		   color:#990099;
		}
		
		.retenir{
			border:1px solid #8c8b8b ; 
			padding:.5em; 
			border-radius:0 0 3px 3px; border:none;											
			box-shadow:0.2px 2px 16px 0px #8c8b8b; 
			width:96.5%;
			background:white;
			color:#990033;
			margin-bottom:1em;
	    }
		.calibri{
		    font-family:calibri light;
		}
	
        
        		
	</style>

	
	<script type="text/javascript" src="../../../js/menu907.js"></script>
    <script type="text/javascript" src="../../../js/accesAuxPopUps.js"></script>
	<script type="text/javascript" src="../../../js/jquery3.4.1.min.js"></script><!-- moteur js: pour le chargement du sujet en mode ajax de la cuisine perso" -->
	<script type="text/javascript" src="../../../js/prism.js"></script>
    <script>
	    // ma p'tite cuisine "ajaxo" 
		$(document).ready(function(){		   
		   $(".unset_").click(function(){
				$('#tpUn').replaceWith('<object  data="tp2.pdf" type="application/pdf" style="width:74%; height:162em;"  ></object>'); 
			    // Solution à la supperposition des sidebar par le footer( changer le scrollTop en fonction de la longuer de la page)
		        window.onscroll = function(){ remonter();  scrollFunction(); paSuperposerSujet();  }			
		   }); 
		   // Dézoomer l'enoncé
           $("#zoomerLeSujet").mouseout(function(){
			  $("#enonceTpUN_").addClass("enonceTpUN"); // Problème: l'effet de zoom ne s'enleve pas( pourtant les dimension reviennent à la normales). Mais c'pas grave on l'faire manuellement avec les fonctionanalité du document source(PDF)"
		      //$("#enonceTpUN_").css("zoom", "60%"); cette solution ne pas non plus. Pire ça m'reduit la hauteur du document
		   });	   
		});
    </script>		   
  </head>

  <body id="corrige">
    <header>
        <hr  id="fantaisieRELOU3">
        <hr  id="fantaisieRELOU1">
        <h1  style='text-align:center'>Master MIASHS : Paris8 </h1>
        <h3  style='text-align:center'>Revisions PHP - Session 2019/2020  </h3>
        <h5  style='text-align:center; font-style:italic;'>TD, TP, Fiches-synthèse, Sujets corrigés </h5>
        <h1  style='text-align:center'>---</h1>
		<button class="openbtn" id="ejectBtn" onclick="openNav();  topFunction();">☰ </button>
        <hr  id="fantaisieRELOU1" >
        <hr  id="fantaisieRELOU3">
    </header>
	
	<!-- TOP MENU -->
	<div id="menu">	  
        <a href="../../../PHP/2017.html">Session 2017</a>	  
		<div class="dropdown2" >
			<button class="dropdown2-btn">Sessions 2018</button> 					  
			<div class="dropdown2-container">
				<a href="../../../PHP/2018s1.html">2018s1</a>
				<a href="../../../PHP/2018s2.html">2018s2</a>						
			</div>
		</div>
		
		<div class="dropdown2" >
			<button class="dropdown2-btn">Sessions 2019</button> 					  
			<div class="dropdown2-container">
				<a href="../../../PHP/2019s1.html">2019s1</a>
				<a href="../../../PHP/2019s2.html">2019s2</a>						
			</div>
		</div>
	</div>
	
	<div id="contenair"  > <!-- contient: le menu, les 2 barre laterales, et le contenu main  -->
		<!-- MENU LATERAL HAUT Gauche -->
		<div id="barre-laterale" >
			<div id="mySidepanel" class="sidepanel">
				<a href="javascript:void(0)" class="closebtn" onclick="closeNav()">×</a>
				<a href="../../../index.html" id="iconAccueil"><img src="../../../photos/accueil.png" ></a>
				<a href="../../../index-ihm.html">IHM</a>
				<a href="../../../index-stat.html">Statistique</a>
				<a href="../../../index-ts.html">TS</a>
				<a href="../../../index-php.html">PHP</a>
				<a href="../../../index-html.html">HTML</a>
				<a href="../../../index-reseau.html">R&eacute;seaux</a>
				<a href="../../../index-reseau.html">Java</a>
				<a href="../../../index-lsf.html">LSF</a>
				<a href="../../../index-cms.html">CMS</a>
			</div>
		</div>
		
		<!-- MENU LATERAL BAS Gauche -->
		<aside class="sidebarGauche" id="sidebarGauche" style=" height:auto; z-index:1;">
			<div id="documenter_sidebar"  >		
				<div class="dropdown" >
					<button class="dropdown-btn">S2</button> 					  
					<div class="dropdown-container">
						<a href="../../../PHP/S2/tp1/tp1.html">TP1</a>
						<a href="../../../PHP/S2/tp2/tp2.html">TP2</a>
						<a href="../../../PHP/S2/tp3/tp3.html">TP3</a>						
					</div>
				</div>				
				<div class="dropdown" style="margin-bottom:0; padding-bottom:0;" >
					<button class="dropdown-btn">S1</button> 					  
					<div class="dropdown-container">
						<a  href="#" onclick="pop_tpSixPHP();" >TP6  Compte  bancaire</a> 
						<a  href="#" onclick="pop_controlTroisPHP();" >Contrôle 3</a>						
					</div>
				</div>
			</div>
		</aside> <!-- comment lui donner le mm height que <main> ? -->
		
		<!-- Barre laterale droite  -->
		<aside class="sidebarDroite saut " id="sidebarDroit">
			<div class="widget-asideD idS">
				<b>TP2:</b> <br>
				Stockage sur fichier:
				<ul type="square">
				    <li>ligne par ligne(a+)</li>
					<li>dernière ligne(w+)</li>
				</ul>
				<small>&rArr; Pas besoin de Mysql(Apache suffit)</small>			 
			</div>			
			<div class="widget-asideD idS" style=" clear:both;" >			
				<b>Start Apache in <span style="color:#660033"><u>prompt Dos</u></span>:</b> <br>
				<span style="color:#8c8b8b">Path( cd <b style="color:red">/</b> &rArr; racine):</span>
				<ul type="square" style="color:black"> 
				    <li><small><span style="color:#aaa">C:\Users\Admin&gt;</span> &emsp;cd 	<b>../..</b></small></li>
					<li><small><span style="color:#aaa">C:&gt;</span> &emsp;cd wamp64/www/</small></li>
				</ul>
				<span style="color:#8c8b8b">Commande:</span>
				<ul type="square" style="color:black">
				    <li><small><span style="color:#aaa">&gt;</span> cd <b style="color:red">../..</b>/wamp64/www</small></li>
				    <li><small><span style="color:#aaa">&gt;</span> php -S localhost : n&deg; port</small></li>
				</ul>
			</div>
			<div class="widget-asideD idS" style=" clear:both;" >			
				<b>Start Apache in <span style="color:#660033"><u>git Bash</u></span>:</b> <br>
				<span style="color:#8c8b8b">Path( cd &rArr; ~ ): </span>
				<ul type="square" style="color:black"> 
					<li><small><span style="color:#aaa">~</span>&emsp;<b>&emsp;cd 	<b>../..</b></b></small></li>
					<li><small><span style="color:#aaa">/c</span>&emsp;<b>&emsp;cd wamp64/www/</b></small></li>
				</ul>
				<span style="color:#8c8b8b">Commande:</span>
				<ul type="square" style="color:black">
				    <li><small><span style="color:#aaa">&gt;</span> cd ~/<b style="color:red">../..</b>/wamp64/www</small></li>
				    <li><small><span style="color:#aaa">&gt;</span> php -S localhost : n&deg; port</small></li>
				</ul>
			</div>
		</aside>
		
		<!-- Contenu: pricipal -->	
		<main >		    
			<section class="bordureSupSection1 " ></section>			
			<section class="conteneurDesSujet" id="tpUn" >
            			
				<h2 class="matiere">PHP2: TP2(<small><i> stockage sur session, cookies, fichier.txt ) </i></small></h2>		  
				<div class="success_  structureSujet"  >			  			  
					<p><u>Rappels</u>: Session vs Cookie</p>
					
					<ul type="none" style="line-height:1.5" id="sujetPDF" >
					     <li id="zoomerLeSujet" >
						    <details >
						      <summary ><a href="#" class="enonce_" >&Eacute;nonc&eacute; ( cliquer sur la flèche )  </a></summary>
                               <div>							  
							        <object id="enonceTpUN_" class="enonceTpUN" data="tp2.pdf" type="application/pdf"   ></object>				
							   </div>
							</details>
						 </li>
				    </ul>
					
					
					<span class="idS subQuestion t-transparent" style="margin-top:0 !important;  width:91.91%;"> &nbsp;<b style="color:gray">&bull; &emsp; Différence entre session et cookie ? </b></span>
					<ul type="none" style="line-height:1.5">
					     <li>
						    <details>
						      <summary>Session</summary>
						      <b class="purple">&emsp;&#8718; <u>@:</u></b> Les <b>variables sessions</b> sont dans un fichier <u>sur le serveur</u><br>							  
							  <b class="purple">&emsp;&#8718; <u>Durée de stockage:</u></b> pendant toute la durée d’une connexion<br>
							  <b class="purple">&emsp;&#8718; <u>Portée:</u></b> &dollar;_SESSION[ ] est une variable globale <br>
							  <b class="purple">&emsp;&#8718; <u>Usage:</u></b> &Eacute;changer les informations d’une page à l’autre <br>
							</details>
						 </li>
						 <li>		     
							 <details>
						      <summary>Cookie</summary>
							  <b class="purple">&emsp;&#8718; <u>@:</u></b> Un <b>cookie</b> est un fichier sur le <u>disque dur du post client.</u><br>
							  &emsp;&emsp;&emsp; C'est le browser client qui gère l'emplacement de stockage <br>
							  <b class="purple">&emsp;&#8718; <u>Durée:</u></b> &Agrave; ma guise(données disponibles<span style="color:#990099"> même hors connexion</span>)<br>
							  <b class="purple">&emsp;&#8718; <u>Portée:</u></b> &dollar;_COOKIE[ ] est une variable locale(<small>cf conséquence - TP2/note1.j</small>) <br>
							  <b class="purple">&emsp;&#8718; <u>Usage:</u></b> Espionner l'internaute(<small>ses habitudes de navigation</small>) <br>
							</details>
						 </li>
				    </ul>
					
						
					
					<span class="idS subQuestion t-transparent" style="margin-top:0 !important; width:91.91%;"> &nbsp;<b style="color:gray">&bull; &emsp; Définition d'un cookie </b></span>
					<ul type="none" style="line-height:1.5">
						 <li>
                            <details>
						      <summary>Comment définir un cookie?</summary>
								<div class="exemple">
								   <span class="idS subQuestion t-transparent" style="margin-top:0 !important; width:91.91%; background:white !important; ">
									   <pre style="padding-bottom:2em !important; " > 								
										  <b>setcookie(nom, valeur, durée);</b>																				
										</pre>								
									</span> 
								</div>
							</details>						 
						   	<details>
						      <summary>Comment définir sa durée(date d'expiration)?</summary>
								<div class="exemple">
								   <span class="idS subQuestion t-transparent" style="margin-top:0 !important; width:91.91%; background:white !important;">
									   <pre >
											<span style="color:green">Une heure:</span> 								
												60s * 60 mn = 3600s													
											<span style="color:green">Une journée:</span>
												3600s * 24 = 86400s
											<span style="color:green">Une semaine:</span>
												86400 * 7
											<span style="color:green">Un  mois:</span>
												86400 * 30									
										</pre>								
									</span> 
								</div>
							</details>

						   	<details>
						        <summary>Expliquer les paramètres  </summary>
							    &emsp;&#8718; 7 parmètres.<br>
								&emsp;&#8718; 3 sont obligatoires: <b>nom,  valeur, durée;</b><br>
							    &emsp;&#8718; Les autres sont à false ou null,  sauf le dernier ( <b>httpOnly</b> )<br>
								&emsp;&#8718; Ce dernier, exclu les language de script. Ce qui protège des attaques XSS.<br>
							</details>
							
							<div class="paragraphe petitParagraphe" style="background:#d2f2df; width:83% !important; padding-left:0.2em !important;"> <!-- ici un dispaly:block s'impose l'elt block à l'intérieur de l'eli inline -->
								 Nota bene:
								<ol style="padding-left:1.5em;">
								   <li>setcookie() défini 1 seul cookie et s'écrit avant tout code HTML</li>
								   <li>sous chrome on peut voir l'etat des cookie avec la touche <b>Ctrl+Shift+J</b></li>
								</ol>
                            </div>	
                         
                         </li>
					</ul>
					<a href="#" class="unset_" >&Eacute;nonc&eacute; plein page ... </a>
					<p></p>
				</div>
				
				
				<!-- ####################    Exercice1 #####################  -->
				
				
				<div class="info_  structureSujet" >
				    <p><u><a href="#"><strong>Exo1:</strong>  Stockage sur cookie </a></u></p>
					<span class="idS subQuestion t-transparent" style="margin-top:0 !important; margin-bottom:1em !important; width:91.91%;"> &nbsp;<b style="color:gray"><small class="blueNum">&#9312;</small> &emsp; La fonction &emsp; <i style="color:#115;">setcookie('clef', "valeur", durée);</i> </b></span><br>
					&emsp;Dans <b>corps.php</b>, enregistrer sur <b>cookies</b> les données saisie au formulaire:<br>  					
					<ul type="disc" class="questions_" >
					     <li>nom </li>
						 <li>prénom </li>
						 <li>phrase </li>
					</ul>
					<details>
					     <summary class="reponse_"><span >R&eacute;ponses ... </span></summary>

							 <pre><code class="language-html" ><source lang="html" line>
/********  form.php ******/

&lt;form action="corps.php" method="get" >
	Nom :&lt;input type="text" name="nom" >
	Prénom:&lt;input type="text" name="prenom" >
	Password:&lt;input type="password" name="password" >
	Punition:&lt;input type="text" name="punition">
	nbFois:&lt;input type="number" name="nbFois" value="10">				 
	&lt;input type="submit" name="submit" value="Envoyer">
&lt;form>

                            </source></code></pre>
                            <pre><code class="language-php" ><source lang="php" line>
/********  corps.php ******/

$nom = isset($_GET["nom"]) ? $_GET["nom"] : ''; 
setcookie( 'nom', $nom, time()+86400*7 ); // 1jours

$prenom = isset($_GET["prenom"]) ? $_GET["prenom"] : '';
setcookie( 'prenom', $prenom, time()+3600*24*7 );//1 semaine

$password= isset($_GET["password"]) ? $_GET["password"] : '';
setcookie( 'pass', $password, time()+86400*7 );//une semaine

$punition=isset($_GET["punition"]) ? $_GET["punition"] : '';
setcookie( 'punition', $punition, time()+86400*1 );//1jour

$nbFois=isset($_GET["nbFois"]) ? (int) $_GET["nbFois"] : '';
setcookie( 'nbFois', $nbFois, time()+86400*7 );   	
                             </source></code></pre>
					</details>
					<p></p>
					<span class="idS subQuestion t-transparent" style="margin-top:0 !important; margin-bottom:1em !important; width:91.91%;"> &nbsp;<b style="color:gray"><small class="blueNum">&#9313;</small> &emsp; La boucle &emsp; <i style="color:#115;">while(condition){ instructions; &emsp; itération; }</i> </b></span><br>
					 &emsp;Afficher le contenu des cookies dans une autre page PHP (<b>cookies.php</b>)<br>
                    <ul type="disc" class="questions_" >		   
						 <li>Le "<b>nbFois</b>" doit être un entier </li>
						 <li>Utiliser une boucle <b>while</b></li>
						 <li>Tester aussi avec une boucle <b>for</b></li>
						 <li>Utiliser un bouton pour afficher le résultat</li>
					</ul>
					<details>
					     <summary class="reponse_"><span >R&eacute;ponses (avec while) </span></summary>
						                         
							 <pre><code class="language-php" ><source lang="php" line>
/********  cookies.php ******/
&lt;?php
 $nom      = isset($_COOKIE['nom']) ? $_COOKIE['nom'] : '';
 $prenom   = isset($_COOKIE['prenom'])   ? $_COOKIE['prenom'] : '';
 $pass     = isset($_COOKIE['pass'])     ? $_COOKIE['pass'] : '';
 $nbFois   = isset($_COOKIE['nbFois'])   ? (int)$_COOKIE['nbFois'] : ''; 
 $punition = isset($_COOKIE['punition']) ? $_COOKIE['punition'] : ''; 
                            </source></code></pre>
							<pre><code class="language-php" ><source lang="php" line>
 if( isset($_COOKIE['nom']) && !empty($_COOKIE['nom']) ){
	echo '
	 COOKIE Nom:'.$nom.'&lt;br>		 
	 COOKIE Prénom:'.$prenom.'&lt;br>			 		 
	 COOKIE Password:'.$pass.'&lt;br>	 
	 COOKIE Punition:&lt;br>';
        // while( condition ) { instructions; itérations; }	 
		$n = 1;
		while ($n &lt;= $nbFois)
		{
			if($nbFois &lt;= 100 ){
				echo $punition.'&lt;br>';					 
			}else{
			    echo 'Nombre trop grand &lt;br>';
			    break;
			}
			$n++;					
		}	   
  }';
?>   	
                             </source></code></pre>
					</details>
					<details>
					     <summary class="reponse_"><span >Test (avec for) </span></summary>
						                         
							 <pre><code class="language-php" ><source lang="php" line>
&lt;?php
    // for( itération ) { instructions; }
	$nbFois = 100;
	for( $i=0; $i <= $nbFois; $i++ ){
	 echo $punition.'&lt;br/>';
	}
?>   	
                             </source></code></pre>
					</details>
					<details>
					     <summary class="reponse_"><span >Appel page d'affichage (cookies.php) </span></summary>
						                         
							 <pre><code class="language-html" ><source lang="html" line>
/********  corps.php ******/
&lt;button onclick="window.location.href='cookies.php';">
    Afficher les cookies
&lt;/button>   	
                             </source></code></pre>
					</details>
					<p></p>
		
					<span class="idS subQuestion t-transparent" style="margin-top:0 !important; margin-bottom:1em !important; width:91.91%;"> &nbsp;<b style="color:gray"><small class="blueNum">&#9314;</small> &emsp; L'opérateur &emsp; <i style="color:#115;">ternaire</i> </b></span><br>
					&emsp;Dans <b>cookies.php</b>, modifier la valeur du prénom dans le cookie  :<br>  					
					<ul type="disc" class="questions_" >
					     <li>Mettre Emilie à la place du "Prénom" saisi par l'internaute. </li>
						 <li>La saisie utilisateur( sur le champs Prénom) sera donc ignorée!  </li>
					</ul>
					<details>
					     <summary class="reponse_"><span >R&eacute;ponses ... </span></summary>
				<pre><code class="language-php" ><source lang="php">
/********  cookies.php ******/
$prenom = isset($_COOKIE['prenom']) ? "Emilie" : '';	
                </source></code></pre>
					</details>
					<p></p>

					&emsp;Dans <b>corps.php</b>, modifier la valeur du nom dans le cookie  :<br>  					
					<ul type="disc" class="questions_" >
					     <li>Mettre Joseph à la place du "Nom" saisi par l'internaute. </li>
						 <li>La saisie utilisateur( sur le champs Nom) sera donc ignorée!  </li>
						 <li>Attention! je l'ai fait dans corps.php(<small> Or Isis le veut dans cookies.php</small>) </li>
					</ul>
					<details>
					     <summary class="reponse_"><span >R&eacute;ponses ... </span></summary>
				<pre><code class="language-php" ><source lang="php">
/********  corps.php ******/
$nom = isset($_GET["nom"]) ? $_GET["nom"] : '';
setcookie('nom', "Joseph", time()+3600*24*7);	
                </source></code></pre>
					</details>
					<p></p>
					
					<span class="idS subQuestion t-transparent" style="margin-top:0 !important; margin-bottom:1em !important; width:91.91%;"> &nbsp;<b style="color:gray"><small class="blueNum">&#9315;</small> &emsp; La commande &emsp; <i style="color:#115;">shmod  &emsp; <span style="color:#990033">user|groupe|other</span> &emsp;  fichier</i> </b></span><br>
					&emsp;Ajouter un répartoire <i>ad hoc</i>, pour les fichiers <b>.txt</b> :<br>  					
					<ul type="disc" class="questions_" >
					    <li>Mettre le répertoire en mode X pour other</li>
						<li>Mettre son contenu(fichiers.txt) en mode RW pour other </li>
					</ul>	
					<details>
					  <summary class="reponse_">Réponse: Définition droit d'accès aux fichiers</summary>
						<div class="exemple">
						   <span class="idS subQuestion t-transparent" style="margin-top:0 !important; width:91.91%; background:#ececea !important; ">
							   <br>
							   <small style="text-aligne:center !important; padding:2em !important; ">&#9888; <i>Sous MS Windows, intaller git bash </i></small><br>
							   <small style="text-aligne:center !important; padding:2em !important; ">&#9888; <i>i fo retenir ce truc:</i></small>
							   <pre style="padding-bottom:2em !important;  "  > 								
								  <img src="chmod.png" class="onglet-sujet idS" style="border:none; padding:0 1em 0 0; float:left; margin:0;"/>																				
								</pre>								
							</span> 
						</div>
					</details>						 
					<details>
					  <summary class="reponse_">Réponse: Application à l'exo</summary>
						<div class="exemple">
						   <span class="idS subQuestion t-transparent" style="margin-top:0 !important; width:91.91%; background:white !important;">
							   <pre >
									<span style="color:green">Le répertoire en mode X(other):</span> 								
										chmod 77<b style="color:#115">1</b> nomInternaute													
									<span style="color:green">Les fichiers en mode RW(other):</span>
										chmod 77<b style="color:#115">6</b> nomInternaute/*.txt								
								</pre>								
							</span> 
						</div>
					</details>
				</div>
				
								
                <!-- #######################  Exercice2 #################### -->
								
				
				<div class="success_ structureSujet ">
					<p><u><a href="#"><strong>Exo2:</strong> Sauvegarde sur fichier </a></u></p>
                    <span class="idS subQuestion t-transparent" style="margin-top:0 !important; margin-bottom:1em !important; width:91.91%;"> &nbsp;<b style="color:gray"><small class="greenNum">&#9312;</small> &emsp; Stockage &emsp; <i style="color:#115;">ligne par ligne</i> </b></span><br>
					&emsp;Reprendre le fichier corps.php | en faisant une copie <b>corpsFic.php</b>							                 
					<ul type="disc" class="questions_" >
                         <li>Enregistrer les noms et prenoms dans le fihier nomInternaute.txt</li>					
						 <li>Chaque couple doit occuper une ligne</li>						 
						 <li>Séparer le couple par un virgule</li>
					</ul>
					<details>
					    <summary class="reponse_"><span >R&eacute;ponses ... </span></summary>
						<p class="retenir calibri" style=><b class="maron">&dollar;nom </b><b class="retenir black">=</b> isset( &dollar;_GET["nom"] )<b class="retenir black">?</b>&dollar;_GET["nom"] <b class="retenir black">:</b> ' ' ; </p>				
						<p class="retenir calibri"><b class="maron">&dollar;prenom </b><b class="retenir black">=</b> isset( &dollar;_GET["prenom"] )<b class="retenir black">?</b>&dollar;_GET["prenom"] <b class="retenir black">:</b> ' ' ; </p>				
						<p class="paragraphe calibri" style="color:black;  margin-top:0;">					
						    &dollar;fichier=fopen("nomInternautes.txt",<b style="color:red">"a+"</b>);
							<br>&dollar;ligne = <b class="maron">&dollar;nom </b>.", ".<b class="maron">&dollar;prenom </b>."\r\n";
							<br>echo fwrite(&dollar;fichier, &dollar;ligne);
							<br>fclose(&dollar;fichier); 					
						</p>					
					</details>
					<p></p>	
					
                    <span class="idS subQuestion t-transparent" style="margin-top:0 !important; margin-bottom:1em !important; width:91.91%;"> &nbsp;<b style="color:gray"><small class="greenNum">&#9313;</small> &emsp; Stockage &emsp; <i style="color:#115;">dernier enregistrement</i> </b></span><br>
					&emsp; Reprendre le fichier corpsFic.php | en faisant une copie <b>corpsFic2.php</b>
					<ul type="disc" class="questions_" >
                        <li>Modifier la façon de sauvegarder chaque couple (nom, prenom) </li>					
						<li>Il faut à chaque fois écraser l’ancien couple</li>
						<li>&#9888; Indication: <span class="calibri">i suffit de placer le pointeur en début de fichier !</span></li>						 
					</ul>
					<details>
					    <summary class="reponse_"><span >R&eacute;ponses ... </span></summary>
                        <p class="paragraphe calibri" style="color:black;  margin-top:0; width:auto;">					
						   &dollar;fichier=fopen("nomInternautes.txt",<b style="color:red">"w+"</b>);					
						</p>	
					</details>
					<p></p>															
				</div>
				
										
                <!-- ######################   Exercice3 ################################# -->
								
				
				<div class="danger_ structureSujet">
					<p><u><a href="#"><strong>Exo3:</strong> les captcha</a> </u>  </p>					
					<span class="idS subQuestion t-transparent" style="margin-top:0 !important; margin-bottom:1em !important; width:91.91%;"> &nbsp;<b style="color:gray"><small class="redNum">&#9312;</small> &emsp; HTML: &emsp; <i style="color:#115;">Saisie <small style="color:gray">( interface d'entrée )</small></i> </b></span><br>
					&emsp;Ajouter une page <b>form<span style="color:#a1008c">ulaire</span>.php</b> contenant:<br>
					<ul type="disc" class="questions_" >
					     <li>Un titre</li>
                         <li>Un formulaire avec un champs "<b>mot de passe</b>" et un champs "<b>Acc&eacute;der</b>"  </li>					
						 <li>Le champs "<b>Acc&eacute;der</b>" appelle la page <b>pageProtegee.php</b>(par POST)</li>						 
					</ul>
					<details>
					     <summary class="reponse_"><span >R&eacute;ponses ... </span></summary>
<pre><code class="language-html" ><source lang="html">
/********  formulaire.php ******/
&lt;!DOCTYPE html>
&lt;html>
&lt;head>
	&lt;title>TP2: Exercice3&lt;/title>
&lt;/head>
&lt;body>
	&lt;form action="pageProtege.php" method="post">
		Password: &lt;input type="password" name="password">		
	    &lt;input type="submit" name="submit" value="Acéder">
	&lt;/form>
&lt;/body>
&lt;/html>	
</source></code></pre>
					</details>
					<p></p>
					<span class="idS subQuestion t-transparent" style="margin-top:0 !important; margin-bottom:1em !important; width:91.91%;"> &nbsp;<b style="color:gray"><small class="redNum">&#9313;</small> &emsp; PHP: &emsp; <i style="color:#115;">Traitement <small style="color:gray">( fichier externe )</small></i> </b></span><br>
					&emsp;Ajouter la page <b><span style="color:#a1008c">pageProtegee.php</span></b> qui, <br>
					<ul type="disc" class="questions_" >
					     <li> affiche un texte si le mot d'passe est correcte </li>
                         <li> affiche un message d'erreur le cas &eacute;ch&eacute;ant  </li>											 
					</ul>
					<details>
					     <summary class="reponse_"><span >R&eacute;ponses ... </span></summary>
<pre><code class="language-php" ><source lang="php">
/********  pageProtege.php ******/
&lt;div id="contenu">
	&lt;h3> TP2: Exercice3&lt;/h3>
&lt;/div>
&lt;?php  
  // COLLECT 
  $motdepasse = 'abc';
  $password=isset($_POST["password"]) ? $_POST["password"]:'';
   
  // CONTRÔLE DE SAISIE
  if(empty($password)) echo 'Entrer votre password&lt;br>';
   
  // AFFICHAGE
  $resultat = strcmp($motdepasse,$password);
  if ($resultat !== 0) echo 'mot de passe erroné';		   
  else  echo 'le cheval de Henti Iv était blanc';
?>
&lt;p>&lt;a href="formulaire.php"> Formulaire de saisie &lt;/a>&lt;/p>
</source></code></pre>					
					</details>
					<p></p>
					<span class="idS subQuestion t-transparent" style="margin-top:0 !important; margin-bottom:1em !important; width:91.91%;"> &nbsp;<b style="color:gray"><small class="redNum">&#9314;</small> &emsp; HTML/PHP: &emsp; <i style="color:#115;">Saisie et traitement <small style="color:gray">( dans le même fichier )</small></i> </b></span><br>
					&emsp;Reprendre la page <b>form<span style="color:#a1008c">ulaire</span>.php</b> :<br>
					<ul type="disc" class="questions_" >
					     <li>Dedans, ins&eacute;rer le contenu de la page <span style="color:#a1008c">pageProtegee.php</span></li>
                         <li>Le formulaire pointe donc sur lui-même</li>											 
					</ul>
					<details>
					     <summary class="reponse_"><span >R&eacute;ponses ... </span></summary>
<pre><code class="language-php" ><source lang="php">
/********  formulaire.php ******/
&lt;!DOCTYPE html>
&lt;html>
&lt;head>
	&lt;title>TP2: Exercice3&lt;/title>
&lt;/head>
&lt;body>
	&lt;form action="pageProtege.php" method="post">
		Password: &lt;input type="password" name="password">		
	    &lt;input type="submit" name="submit" value="Acéder">
	&lt;/form>
&lt;/body>
&lt;/html>
    <hr>	
&lt;?php  
  $motdepasse = 'abc';
  
  if(isset($_POST["password"]) && !empty($_POST["password"])){		
		// COLLECTE
		$password = $_POST["password"];
		// AFFICHAGE
		$resultat = strcmp($motdepasse,$password);
		if ($resultat !== 0) echo 'mot de passe erroné';		   
		else  echo 'le cheval de Henti Iv était blanc';	
  }
?>	
</source></code></pre>
					</details>
					<p></p>
					<span class="idS subQuestion t-transparent" style="margin-top:0 !important; margin-bottom:1em !important; width:91.91%;"> &nbsp;<b style="color:gray"><small class="redNum">&#9315;</small> &emsp; Conclusion:  </b></span><br>
				    <ul type="square" class="paragraphe petitParagraphe"> 
					  <li>
					     <b>Traitement dans le même fichier :</b><br>
                         Pour eviter les erreurs "<b style="color:#990033">Notice indefined variable</b>":<br> 
	                     Mettre tout le code à l'interieur d'<u>une grosse boucle</u> <b>if</b> qui teste la variable réçue, en utilisant <b>isset()</b> et <b>!empty()</b>
					  </li>
					  <li>
					     <b>Traitement dans un autre fichier :</b><br>
						 	On peut éviter ces <b style="color:#990033">erreurs</b> sans se taper <u>la grosse boucle</u>.
							i suffit d'utiliser l'opérateur ternaire pour insptecter les variable :<br>
							<code class="idS">$variable <b  style="color:#990033">=</b> isset($_POST["name"]) <b class="idS" style="color:#990099">?</b> $_POST["name"] <b class="idS" style="color:#990099">:</b> '';</code>
					  </li>
				    </ul><br>
				
				</div>
				
				
				
				
                <!-- ############################# Exercice4 ########################## -->
				
				
				
			  
			</section> <!-- FIN section1- conteneurDesSujet - PHP -->
		</main>
		
		<button onclick="topFunction()" id="myBtn" title="Go to top" >
		    <img  src="../../../photos/top.JPG" id="imageToTop">
	    </button>
		
		<hr width=100% color=whitesmoke style="display:inline-block;">
		<div class="conteneur-reponses" style="z-index:99 !important;"></div> 
	</div> <!-- div#contenair -->

	<!-- Blem de sticky quand la page remonte: Le footer supperpose les sidebars --> 
    <!-- Solution: cf sticky-bis.js/ligne31 -->           	
    <footer style="z-index:99 !important; text-align:left">

        <span style="padding:0 0 0 20.5em">Revue des installations <b style="color:gold">&#8227;&#8227;&#8227;</b> C:\wamp64\www\M1</span><br>
		<span style=" padding-left:8em; padding-right:18em; color:#8c8b8b; ">Inventaire ports apache (local host)</span>
		<span style="color:#8c8b8b;">URL ( 3 premiers TP )</span>
	    <div class="content-footer" style=" margin-top:-2.4em; " >         
            <div class="ndreda-footer" style="padding:0; background:white;"> 		  
				<img src="../tp1/inventaire-ports-apache.png" class="img2" style="margin:1em; height:50%; width:40%; border-radius:0 0 0 10px; "/>

				<img src="../tp1/chemin-tp.png" class="img2" style="margin:1em; height:50%; width:40%; border-radius:0 0 10px 0;  float:right; "/>
            </div>		
			<span class="copyright_"><span style="color:gray;">2019 &copy; -</span> Master Handi</span>
        </div><!-- conteneur-reponses Q1.1 -->	  
    </footer>
	
    <script type="text/javascript" src="../../../js/top.js"></script>
    <script type="text/javascript" src="../../../js/sticky-bis.js"></script>	
    <script>
	    // Pour pas que la barre laterale droite supperpose le footer
		// redefinition f° pasupperpose() car ici la page est trop courte
		function paSuperposer() {
		  if (document.body.scrollTop > 2600  || document.documentElement.scrollTop > 2600 ) {
			barreDroite.classList.add("stickyNoSupepose");
		  }else{
			barreDroite.classList.remove("stickyNoSupepose");   
		  } 		
		}	
	</script>
  </body>
</html>